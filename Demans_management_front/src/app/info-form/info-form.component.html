<div class="container mt-4">

  <h2 class="text-center mb-4 fw-bold">Administración del Sistema</h2>

  <!-- ========== row 1 ========== -->
  <div class="row">

    <!-- ======== Tribes ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0 fw-bold">Tribus</h5>
        </div>

        <div class="card-body d-flex flex-column">


          <div *ngIf="!isLoading; else cargando" >
            <ul class="list-group mb-3 lista-scroll">
              <li *ngFor="let tribu of tribus; let i = index"
                  class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-semibold">{{ tribu }}</span>
                <button class="btn btn-outline-danger btn-sm" (click)="eliminateTribu(i)">
                  <i class="bi bi-trash-fill"></i>
                </button>
              </li>
            </ul>

            <div class="input-group mt-auto">
              <input type="text" class="form-control" placeholder="Nueva tribu"
                    [(ngModel)]="newTribu">
              <button class="btn btn-success" (click)="addTribu()" [disabled]="!newTribu">Agregar</button>
            </div>
          </div>

    
          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">

              <!-- Loader animado -->
              <div class="loader mb-3"></div>

              <!-- Texto -->
              <p class="text-muted fw-semibold">Cargando información…</p>

              <!-- Skeleton -->
              <div class="w-75 mt-3">
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
              </div>
            </div>
          </ng-template>



          

        </div>
      </div>
    </div>

    <!-- ======== Vp Sponsor ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0 fw-bold">Sponsors</h5>
        </div>

        <div class="card-body d-flex flex-column">

          <div *ngIf="!isLoading; else cargando" >
            <ul class="list-group mb-3 lista-scroll">
              <li *ngFor="let sponsor of sponsors; let i = index"
                  class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-semibold">{{ sponsor }}</span>
                <button class="btn btn-outline-danger btn-sm" (click)="eliminateSponsor(i)">
                  <i class="bi bi-trash-fill"></i>
                </button>
              </li>
            </ul>

            <div class="input-group mt-auto">
              <input type="text" class="form-control" placeholder="Nuevo sponsor"
                    [(ngModel)]="newSponsor">
              <button class="btn btn-primary" (click)="addSponsor()" [disabled]="!newSponsor">Agregar</button>
            </div>
          </div>

          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">

              <!-- Loader animado -->
              <div class="loader mb-3"></div>

              <!-- Texto -->
              <p class="text-muted fw-semibold">Cargando información…</p>

              <!-- Skeleton -->
              <div class="w-75 mt-3">
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
              </div>
            </div>
          </ng-template>

          

        </div>
      </div>
    </div>

  </div>

  <!-- ========== row 2 ========== -->
  <div class="row">

    <!-- ======== Squads ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-warning">
          <h5 class="mb-0 fw-bold">Squads</h5>
        </div>

        <div class="card-body d-flex flex-column">

          <div *ngIf="!isLoading; else cargando">
            <ul class="list-group mb-3 lista-scroll">
              <li *ngFor="let squad of squads; let i = index"
                  class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-semibold">{{ squad }}</span>
                <button class="btn btn-outline-danger btn-sm" (click)="eliminateSquad(i)">
                  <i class="bi bi-trash-fill"></i>
                </button>
              </li>
            </ul>

            <div class="input-group mt-auto">
              <input type="text" class="form-control" placeholder="Nuevo squad"
                    [(ngModel)]="newSquad">
              <button class="btn btn-warning text-dark" (click)="addSquad()" [disabled]="!newSquad">Agregar</button>
            </div>
          </div>

          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">

              <!-- Loader animado -->
              <div class="loader mb-3"></div>

              <!-- Texto -->
              <p class="text-muted fw-semibold">Cargando información…</p>

              <!-- Skeleton -->
              <div class="w-75 mt-3">
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
              </div>
            </div>
          </ng-template>

          

        </div>
      </div>
    </div>

    <!-- ======== minimum amount ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-dark text-white">
          <h5 class="mb-0 fw-bold">Valores de precios</h5>
        </div>

        <div class="card-body">
          <div *ngIf="!isLoading; else cargando">

              <!-- Minimun salary -->
              <p class="fw-semibold">Salario mínimo legal vigente actual:</p>
              <h4 class="text-success fw-bold">
                {{ minimumSalary | currency:'COP':'symbol':'1.0-0' }}
              </h4>

              <div class="input-group mt-3">
                <input type="number"
                      class="form-control"
                      [(ngModel)]="newSalary"
                      placeholder="Actualizar salario mínimo">
                <button class="btn btn-dark" (click)="updateSalary()" [disabled]="!newSalary">Actualizar</button>
              </div>

              <hr class="my-4">

              <!-- minimum cutting quantity -->
              <p class="fw-semibold">Monto de corte de presupuesto:</p>
              <h4 class="text-success fw-bold">
                {{ minimumCuttingQuantity | number:'1.0-0' }} <span class="text-success">SMMLV</span>
              </h4>

              <div class="input-group mt-3">
                <input type="number"
                      class="form-control"
                      [(ngModel)]="newMinumumCuttingQuantity"
                      placeholder="Actualizar monto de corte">
                <button class="btn btn-dark" (click)="updateMinimumCuttingQuantity()"  [disabled]="!newMinumumCuttingQuantity">Actualizar</button>
              </div>

            </div>

          <!-- Loading -->
          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">

              <!-- Loader animado -->
              <div class="loader mb-3"></div>
              <p class="text-muted fw-semibold">Cargando información…</p>

              <!-- Skeleton -->
              <div class="w-75 mt-3">
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
              </div>
            </div>
          </ng-template>

        </div>


      </div>
    </div>

  </div>

  <!-- ========== row 3 ========== -->
  <div class="row">

    <!-- ======== Vice Backup ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-danger text-white">
          <h5 class="mb-0 fw-bold">Viceprecidencia de Respaldo</h5>
        </div>

        <div class="card-body d-flex flex-column">
          
          <div *ngIf="!isLoading; else cargando">
            
            <label for="vp_sponsor" class="fw-semibold mb-2">Vicepresidente de respaldo:</label>
            
            <h3 class="fw-bold mb-4 mt-4">
              {{ vicepresidentAproversBackup || 'Sin asignar' }}
            </h3>

            <div class="input-group mt-4">
              <select
                id="vicepresident_aprover"
                name="vicepresident_aprover"
                [(ngModel)]="newVicepresidentBackup"
                class="form-select"
              >
                <option value="" disabled hidden>Seleccione una opción</option>
                <option *ngFor="let vp of listOptionsVicepresidentAproversBackup" [value]="vp">
                  {{ vp }}
                </option>
              </select>
              
              <button 
                class="btn btn-danger text-white fw-bold" 
                type="button"
                (click)="updateVicepresidentBackup()"
                [disabled]="!newVicepresidentBackup">
                Actualizar
              </button>
            </div>
          </div>

          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">
              
              <div class="spinner-border text-warning mb-3" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>

              <p class="text-muted fw-semibold">Cargando información…</p>

              <div class="w-75 mt-3">
                <div class="skeleton-loader mb-2" style="height: 20px; background: #f2f2f2; border-radius: 4px; animation: pulse 1.5s infinite;"></div>
                <div class="skeleton-loader mb-2" style="height: 20px; background: #f2f2f2; border-radius: 4px; animation: pulse 1.5s infinite; width: 80%;"></div>
                <div class="skeleton-loader mb-2" style="height: 20px; background: #f2f2f2; border-radius: 4px; animation: pulse 1.5s infinite; width: 60%;"></div>
              </div>
            </div>
          </ng-template>

        </div>
      </div>
    </div>


    <!-- ======== Vicepresident Aprovers ======== -->
    <div class="col-md-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header bg-secondary text-white">
          <h5 class="mb-0 fw-bold">Viceprecidencias aprovadoras</h5>
        </div>

        <div class="card-body d-flex flex-column">

          <div *ngIf="!isLoading; else cargando">
            <ul class="list-group mb-3 lista-scroll">
              <li *ngFor="let vicepresidencias of vicepresidentAprovers; let i = index"
                  class="list-group-item d-flex justify-content-between align-items-center">
                <span class="fw-semibold">{{ vicepresidencias }}</span>
                <button class="btn btn-outline-danger btn-sm" (click)="eliminateVicepresident(i)">
                  <i class="bi bi-trash-fill"></i>
                </button>
              </li>
            </ul>

            <div class="input-group mt-4">
              <select
                id="vicepresident_aprover"
                name="vicepresident_aprover"
                [(ngModel)]="newVicepresident"
                class="form-select"
              >
                <option value="" disabled hidden>Seleccione una opción</option>
                <option *ngFor="let vp of listOptionsVicepresidentAprovers" [value]="vp">
                  {{ vp }}
                </option>
              </select>
              
              <button 
                class="btn btn-secondary text-white fw-bold" 
                type="button"
                (click)="addVicepresident()"
                [disabled]="!newVicepresident">
                Agregar
              </button>
            </div>
          </div>

          <ng-template #cargando>
            <div class="d-flex flex-column align-items-center py-5">

              <!-- Loader animado -->
              <div class="loader mb-3"></div>

              <!-- Texto -->
              <p class="text-muted fw-semibold">Cargando información…</p>

              <!-- Skeleton -->
              <div class="w-75 mt-3">
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
                <div class="skeleton mb-2"></div>
              </div>
            </div>
          </ng-template>

          

        </div>
      </div>
    </div>


  </div>

</div>
